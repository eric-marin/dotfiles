#!/usr/bin/fish
if test (count $argv) -lt 1; or not test -f $argv[1]
  echo "Usage: $(status filename) <img>"
  exit 1
end

wallust run $argv[1] -Ts; and begin
	set -U IMG $argv[1]
	echo "IMG=$IMG" > ~/.config/scripts/IMG.env
	niri msg action do-screen-transition 
	wallust run $IMG
	systemctl --user restart swaybg.service
	makoctl reload
	notify-send -i $IMG "Wallust" "Changed wallpaper and palette."
end; or begin
	notify-send -u critical "Wallust" "Failed to change palette"
end;

